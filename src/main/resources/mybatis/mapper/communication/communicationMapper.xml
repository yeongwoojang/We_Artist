<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.we.art.communication.model.repository.CommunicationRepository">

<select id="selectHistoryById" resultMap="NotiData">
	SELECT TO_ID, FROM_ID, IS_CHECK, NICKNAME FROM 
	(SELECT *FROM TB_HISTORY WHERE TO_ID=#{userId} AND IS_CHECK = 0) T1 
	JOIN TB_USER
	ON(T1.FROM_ID = USER_ID)
</select>


	<resultMap type="map" id="NotiData">
		<result column="TO_ID" javaType="String" property="toId"/>
		<result column="FROM_ID" javaType="string" property="fromId"/>
		<result column="IS_CHECK" javaType="INTEGER" property="isCheck"/>
		<result column="NICKNAME" javaType="String" property="nickName"/>
	</resultMap>
</mapper>